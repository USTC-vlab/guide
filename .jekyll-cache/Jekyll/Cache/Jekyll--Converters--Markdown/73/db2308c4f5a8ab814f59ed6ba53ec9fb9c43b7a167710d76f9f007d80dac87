I"•5<h1 id="æœ‰é™çŠ¶æ€æœº">æœ‰é™çŠ¶æ€æœº</h1>
<h2 id="æœ‰é™çŠ¶æ€æœºç®€ä»‹">æœ‰é™çŠ¶æ€æœºç®€ä»‹</h2>
<p>æœ‰é™çŠ¶æ€æœº(FSM)æ˜¯è®¸å¤šæ•°å­—ç³»ç»Ÿä¸­ç”¨æ¥æ§åˆ¶ç³»ç»Ÿå’Œæ•°æ®æµè·¯å¾„è¡Œä¸ºçš„æ—¶åºç”µè·¯ã€‚FSMçš„å®ä¾‹åŒ…æ‹¬æ§åˆ¶å•å…ƒå’Œæ—¶åºã€‚ æœ¬å®éªŒä»‹ç»äº†ä¸¤ç§ç±»å‹çš„FSMï¼ˆMealyå’ŒMooreï¼‰çš„æ¦‚å¿µï¼Œä»¥åŠå¼€å‘æ­¤ç±»çŠ¶æ€æœºçš„å»ºæ¨¡æ–¹å¼ã€‚ è¯·å‚é˜…Vivadoæ•™ç¨‹ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨Vivadoå·¥å…·åˆ›å»ºé¡¹ç›®å’ŒéªŒè¯æ•°å­—ç”µè·¯ã€‚</p>
<h2 id="å®éªŒç›®æ ‡">å®éªŒç›®æ ‡</h2>
<p>åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œä½ å°†ä¼šå­¦åˆ°ï¼š</p>
<ul>
  <li>å¯¹ Mealy FSMs å»ºæ¨¡</li>
  <li>å¯¹ Moore FSMs å»ºæ¨¡
    <h2 id="mealy-fsmç±³åˆ©å‹æœ‰é™çŠ¶æ€æœº">Mealy FSMï¼ˆç±³åˆ©å‹æœ‰é™çŠ¶æ€æœºï¼‰</h2>
    <p>æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰æˆ–ç§°ç®€å•çŠ¶æ€æœºç”¨äºè®¾è®¡è®¡ç®—æœºç¨‹åºå’Œæ—¶åºé€»è¾‘ç”µè·¯ã€‚å®ƒè¢«è®¾æƒ³ä¸ºæŠ½è±¡æœºå™¨ï¼Œå¯ä»¥å¤„äºæœ‰é™æ•°é‡çš„ç”¨æˆ·å®šä¹‰çŠ¶æ€ä¹‹ä¸€ã€‚æœºå™¨ä¸€æ¬¡åªèƒ½å¤„äºä¸€ç§çŠ¶æ€; å®ƒåœ¨ä»»ä½•ç»™å®šæ—¶é—´æ‰€å¤„çš„çŠ¶æ€ç§°ä¸ºå½“å‰çŠ¶æ€ã€‚ å½“ç”±è§¦å‘äº‹ä»¶æˆ–æ¡ä»¶å¯åŠ¨æ—¶ï¼Œå®ƒå¯ä»¥ä»ä¸€ç§çŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ç§çŠ¶æ€; è¿™ç§°ä¸ºè¿‡æ¸¡ã€‚ç‰¹å®šFSMç”±å…¶çŠ¶æ€åˆ—è¡¨å’Œæ¯ä¸ªè½¬æ¢çš„è§¦å‘æ¡ä»¶å®šä¹‰ã€‚<br />
åœ¨ç°ä»£ç¤¾ä¼šä¸­çš„è®¸å¤šè®¾å¤‡ä¸­å¯ä»¥è§‚å¯Ÿåˆ°çŠ¶æ€æœºçš„è¸ªå½±ï¼Œè¿™äº›è®¾å¤‡æ ¹æ®å‘ç”Ÿçš„äº‹ä»¶åºåˆ—æ‰§è¡Œé¢„å®šçš„åŠ¨ä½œåºåˆ—ã€‚ ç®€å•çš„ä¾‹å­æ˜¯è‡ªåŠ¨å”®è´§æœºï¼Œå½“å­˜æ”¾ç¡¬å¸çš„é‡‘é¢è¾¾åˆ°å•†å“ä»·æ ¼æ—¶åˆ†é…äº§å“ï¼›ç”µæ¢¯åœ¨æŠŠä¹˜å®¢é€è¾¾æ¥¼ä¸Šåæ‰ä¼šä¸‹é™ï¼›äº¤é€šç¯æŒ‰ä¸€å®šçš„æ—¶é—´æ”¹å˜ä¿¡å·æ¥æ§åˆ¶è½¦æµï¼›ä»¥åŠéœ€è¦è¾“å…¥ä¸€ä¸²æ­£ç¡®çš„æ•°å­—æ‰èƒ½æ‰“å¼€çš„ç»„åˆé”ã€‚<br />
çŠ¶æ€æœºä½¿ç”¨ä¸¤ç§åŸºæœ¬ç±»å‹å»ºæ¨¡â€“Mealyå’ŒMooreã€‚ åœ¨Mealyæœºå™¨ä¸­ï¼Œè¾“å‡ºå–å†³äºå½“å‰çŠ¶æ€å’Œå½“å‰è¾“å…¥ã€‚åœ¨Mooreæœºå™¨ä¸­ï¼Œè¾“å‡ºä»…å–å†³äºå½“å‰çŠ¶æ€ã€‚ <br />
Mealyå‹çŠ¶æ€æœºçš„ä¸€èˆ¬æ¨¡å‹ç”±ç»„åˆè¿‡ç¨‹ç”µè·¯å’ŒçŠ¶æ€å¯„å­˜å™¨ç»„æˆï¼Œç»„åˆè¿‡ç¨‹ç”µè·¯ç”Ÿæˆè¾“å‡ºå’Œä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€å¯„å­˜å™¨ä¿å­˜å½“å‰çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚çŠ¶æ€å¯„å­˜å™¨é€šå¸¸å»ºæ¨¡ä¸ºDè§¦å‘å™¨ã€‚çŠ¶æ€å¯„å­˜å™¨å¿…é¡»å¯¹æ—¶é’Ÿè¾¹ç¼˜æ•æ„Ÿã€‚å…¶ä»–å—å¯ä»¥ä½¿ç”¨alwaysè¿‡ç¨‹å—æˆ–alwaysè¿‡ç¨‹å—å’Œdataflowå»ºæ¨¡è¯­å¥çš„æ··åˆæ¥å»ºæ¨¡ï¼›alwaysè¿‡ç¨‹å—å¿…é¡»å¯¹æ‰€æœ‰è¾“å…¥æ•æ„Ÿï¼Œå¹¶ä¸”å¿…é¡»ä¸ºæ¯ä¸ªåˆ†æ”¯å®šä¹‰æ‰€æœ‰è¾“å‡ºï¼Œä»¥ä¾¿å°†å…¶å»ºæ¨¡ä¸ºç»„åˆå—ã€‚ä¸¤æ®µå¼Mealyæœºå™¨å¯ä»¥è¡¨ç¤ºä¸º</p>

    <figure><img class="docimage" src="images/finite_state_machine/1.png" alt="" /></figure>
  </li>
</ul>

<p>ä¸‹é¢æ˜¯å¥‡å¶æ ¡éªŒæ ¡éªŒæœºçš„çŠ¶æ€å›¾å’Œç›¸å…³æ¨¡å‹ï¼š</p>

<figure><img class="docimage" src="images/finite_state_machine/2.png" alt="" /></figure>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module mealy_2processes(input clk, input reset, input x, output reg parity); reg state, nextstate;
parameter S0=0, S1=1;
always @(posedge clk or posedge reset)	// always block to update state if (reset)
state &lt;= S0;
else
state &lt;= nextstate;

always @(state or x) // always block to compute both output &amp; nextstate begin
parity = 1'b0; case(state)
S0: if(x)
begin
parity = 1; nextstate = S1;
end else
nextstate = S0;
S1: if(x)
nextstate = S0;
else begin
parity = 1; nextstate = S1;





end

end default:
nextstate = S0; endcase

endmodule
</code></pre></div></div>

<p>ä¸‰æ®µå¼Mealyæœºå™¨çš„å›¾ç¤ºåŠå…¶å»ºæ¨¡å¦‚ä¸‹ï¼š</p>

<figure><img class="docimage" src="images/finite_state_machine/3.png" alt="" /></figure>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module mealy_3processes(input clk, input reset, input x, output reg parity); reg state, nextstate;
parameter S0=0, S1=1;
always @(posedge clk or posedge reset)	// always block to update state if (reset)
state &lt;= S0;
else
state &lt;= nextstate;
always @(state or x)	// always block to compute output begin
parity = 1'b0; case(state)
S0: if(x)
parity = 1; S1: if(!x)
parity = 1;
endcase end
always @(state or x)	// always block to compute nextstate begin
nextstate = S0; case(state)
S0: if(x)
nextstate = S1; S1: if(!x)
nextstate = S1; endcase
end endmodule
</code></pre></div></div>

<p>çŠ¶æ€åˆ†é…å¯ä»¥ä½¿ç”¨ç‹¬çƒ­ç ï¼ˆone â€“ hot codeï¼‰ï¼ŒäºŒè¿›åˆ¶ç¼–ç ï¼Œæ ¼é›·ç ä»¥åŠå…¶ä»–ç¼–ç ã€‚é€šå¸¸ï¼Œç»¼åˆå·¥å…·å°†ç¡®å®šçŠ¶æ€åˆ†é…çš„ç¼–ç ï¼Œä½†ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡æ›´æ”¹ç»¼åˆå±æ€§æ¥å¼ºåˆ¶ç‰¹å®šç¼–ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚çŠ¶æ€åˆ†é…ç¼–ç å°†å¯¹çŠ¶æ€å¯„å­˜å™¨ä¸­ä½¿ç”¨çš„ä½æ•°äº§ç”Ÿå½±å“ï¼›ç‹¬çƒ­ç¼–ç ä½¿ç”¨æœ€å¤šçš„ä½æ•°ï¼Œä½†è§£ç éå¸¸å¿«ï¼ŒäºŒè¿›åˆ¶ç¼–ç ä½¿ç”¨æœ€å°‘çš„ä½æ•°ï¼Œä½†è§£ç è¾ƒé•¿ã€‚</p>
<figure><img class="docimage" src="images/finite_state_machine/4.png" alt="" /></figure>
<p>v</p>

<h2 id="ä½¿ç”¨ä¸‰æ®µå¼mealyçŠ¶æ€æœºçš„å®ç°ä¸€ä¸ªåºåˆ—æ£€æµ‹å™¨">ä½¿ç”¨ä¸‰æ®µå¼MealyçŠ¶æ€æœºçš„å®ç°ä¸€ä¸ªåºåˆ—æ£€æµ‹å™¨</h2>
<h3 id="å®éªŒè¦æ±‚">å®éªŒè¦æ±‚</h3>
<p>MealyçŠ¶æ€æœºæœ‰ä¸€ä¸ªè¾“å…¥ï¼ˆainï¼‰å’Œä¸€ä¸ªè¾“å‡ºï¼ˆyoutï¼‰ã€‚ å½“ä¸”ä»…å½“æ¥æ”¶åˆ°çš„1çš„æ€»æ•°å¯è¢«3æ•´é™¤æ—¶ï¼Œè¾“å‡ºä¸º1ï¼ˆæç¤ºï¼š0ä¹Ÿç®—è¢«3æ•´é™¤ï¼Œä½†æ˜¯ï¼Œåœ¨å¤ä½å‘¨æœŸä¸­ä¸æŠŠè®¡æ•°å™¨å½’ä¸º0ï¼Œå¤ä½ä¿¡å·è¿‡åæŠŠè®¡æ•°å™¨å½’0â€”â€”å‚è€ƒæ¨¡æ‹Ÿæ³¢å½¢æ—¶é—´= 200ã€‚è®¾è®¡ä¸€ä¸ªtestbenchå¹¶é€šè¿‡behavioral simulationéªŒè¯æ¨¡å‹ã€‚ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚ å®Œæˆè®¾è®¡æµç¨‹ï¼Œç”Ÿæˆæ¯”ç‰¹æµï¼Œå¹¶å°†å…¶ä¸‹è½½åˆ°Basys3æˆ–Nexys4 DDRæ¿ã€‚éªŒè¯åŠŸèƒ½ã€‚</p>

<h3 id="å®éªŒæ­¥éª¤">å®éªŒæ­¥éª¤</h3>
<ol>
  <li>
    <p>æ‰“å¼€Vivadoå¹¶åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹å¹¶å‘½åä¸ºlab10_1ã€‚</p>
  </li>
  <li>
    <p>åˆ›å»ºå¹¶æ·»åŠ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚</p>
  </li>
  <li>
    <p>ç¼–å†™ä»¿çœŸæ–‡ä»¶æ¥éªŒè¯ä»£ç çš„æ­£ç¡®</p>
  </li>
  <li>
    <p>åœ¨å·¥ç¨‹ä¸­æ·»åŠ é€‚å½“çš„ç®¡è„šçº¦æŸçš„XDCæ–‡ä»¶ï¼Œå¹¶åŠ å…¥ç›¸å…³è”çš„ç®¡è„šï¼Œä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚</p>
  </li>
  <li>
    <p>ç»¼åˆï¼Œå®ç°è®¾è®¡ã€‚</p>
  </li>
  <li>
    <p>ç”Ÿæˆæ¯”ç‰¹æµæ–‡ä»¶ï¼Œä¸‹è½½åˆ°Nexys4å¼€å‘æ¿ä¸Šï¼ŒéªŒè¯åŠŸèƒ½ã€‚</p>
    <h3 id="å‚è€ƒä»£ç å’Œåˆ†æ">å‚è€ƒä»£ç å’Œåˆ†æ</h3>
    <p>module lab10_1(
     input clk,
     input rst,
     input ain,
     output reg [3:0]count,
     output reg yout
     ); <br />
     parameter s0=0, s1=1,s2=2;
     reg [1:0]state,nextstate;
     always@(posedge clk or posedge rst)
     begin
         if(rst)
         begin
             state&lt;=s0;
             count&lt;=4â€™b0;
         end
         else
         begin
             state&lt;=nextstate;
             if(ain)
             count&lt;=count+1;
         end
     end</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> always@(*)
 begin
     yout=0;
     case(state)
     s0:if(!ain)
     yout=1;
     s2:if(ain)
     yout=1;
     endcase
 end

 always@(*)
 begin
     case(state)
     s0:if(ain)
     nextstate=s1;
     else
     nextstate=s0;
     s1:if(ain)
     nextstate=s2;
     else
     nextstate=s1;
     s2:if(ain)
     nextstate=s0;
     else
     nextstate=s2;
     endcase
 end  endmodule ç±³åˆ©å‹çš„è¾“å‡ºæ˜¯å’Œå½“å‰çŠ¶æ€ä»¥åŠè¾“å…¥éƒ½ç›¸å…³çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯è¿™æ ·çš„æƒ…å†µã€‚ä½†æ˜¯å¦‚æœæ˜¯æ‘©å°”å‹çš„è¯è¾“å…¥åªä¸å½“å‰çŠ¶æ€ç›¸å…³ï¼Œä¹‹åä¹Ÿä¼šæœ‰ä»‹ç»ã€‚ ## Moore FSMï¼ˆæ‘©å°”å‹æœ‰é™çŠ¶æ€æœºï¼‰ Mooreå‹æœ‰é™çŠ¶æ€æœºçš„ä¸€èˆ¬æ¨¡å‹å¦‚ä¸‹æ‰€ç¤ºã€‚ å…¶è¾“å‡ºç”±çŠ¶æ€å¯„å­˜å™¨å—ç”Ÿæˆã€‚ ä½¿ç”¨å½“å‰è¾“å…¥å’Œå½“å‰çŠ¶æ€ç¡®å®šä¸‹ä¸€çŠ¶æ€ã€‚ è¿™é‡Œçš„çŠ¶æ€å¯„å­˜å™¨ä¹Ÿä½¿ç”¨Dè§¦å‘å™¨å»ºæ¨¡ã€‚ é€šå¸¸ï¼ŒMooreæœºå™¨ä½¿ç”¨ä¸‰ä¸ªå—æ¥æè¿°ï¼Œå…¶ä¸­ä¸€ä¸ªå—å¿…é¡»æ˜¯é¡ºåºçš„ï¼Œå¦å¤–ä¸¤ä¸ªå—å¯ä»¥ä½¿ç”¨alwayså—æˆ–alwayså’Œdataflowå»ºæ¨¡ç»“æ„çš„ç»„åˆæ¥å»ºæ¨¡ã€‚   
</code></pre></div>    </div>
  </li>
</ol>

<figure><img class="docimage" src="images/finite_state_machine/6.png" alt="" /></figure>
<p>v</p>

<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨Mooreå‹æœ‰é™çŠ¶æ€æœºå®ç°çš„å¥‡å¶æ ¡éªŒå™¨çš„çŠ¶æ€å›¾ã€‚ä¸ä¹‹å…³è”æ¨¡å‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p>

<figure><img class="docimage" src="images/finite_state_machine/7.png" alt="" /></figure>
<p>v</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module moore_3processes(input clk, input reset, input x, output reg parity); reg state, nextstate;
parameter S0=0, S1=1;
always @(posedge clk or posedge reset)	// always block to update state if (reset)
state &lt;= S0;
else
state &lt;= nextstate;

always @(state)	// always block to compute output begin
case(state)
S0: parity = 0; S1: parity = 1;
endcase
end
always @(state or x)	// always block to compute nextstate begin
nextstate = S0; case(state)
S0: if(x)
nextstate = S1; S1: if(!x)
nextstate = S1;
endcase
end
endmodule
</code></pre></div></div>

<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œè¾“å‡ºå—å¾ˆç®€å•ï¼Œå¯ä»¥ä½¿ç”¨dataflowå»ºæ¨¡æ„é€ è¿›è¡Œå»ºæ¨¡ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ä»£æ›¿alwayså—ã€‚ æ‚¨è¿˜éœ€è¦å°†è¾“å‡ºç±»å‹ä»regæ›´æ”¹ä¸ºwireã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>assign parity = (state==S0) ? 1'b0: 1'b1; ## ä½¿ç”¨ä¸‰æ®µå¼MooreçŠ¶æ€æœºçš„å®ç°ä¸€ä¸ªåºåˆ—æ£€æµ‹å™¨ ### å®éªŒè¦æ±‚ MooreçŠ¶æ€æœºæœ‰ä¸€ä¸ªè¾“å…¥ï¼ˆainï¼‰å’Œä¸€ä¸ªè¾“å‡ºï¼ˆyoutï¼‰ã€‚ å½“ä¸”ä»…å½“æ¥æ”¶åˆ°çš„1çš„æ€»æ•°å¯è¢«3æ•´é™¤æ—¶ï¼Œè¾“å‡ºä¸º1ï¼ˆæç¤ºï¼š0ä¹Ÿç®—è¢«3æ•´é™¤ï¼Œä½†æ˜¯ï¼Œåœ¨å¤ä½å‘¨æœŸä¸­ä¸æŠŠè®¡æ•°å™¨å½’ä¸º0ï¼Œå¤ä½ä¿¡å·è¿‡åæŠŠè®¡æ•°å™¨å½’0â€”â€”å‚è€ƒæ¨¡æ‹Ÿæ³¢å½¢æ—¶é—´= 200ã€‚è®¾è®¡ä¸€ä¸ªtestbenchå¹¶é€šè¿‡behavioral simulationéªŒè¯æ¨¡å‹ã€‚ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚ å®Œæˆè®¾è®¡æµç¨‹ï¼Œç”Ÿæˆæ¯”ç‰¹æµï¼Œå¹¶å°†å…¶ä¸‹è½½åˆ°Basys3æˆ–Nexys4 DDRæ¿ã€‚éªŒè¯åŠŸèƒ½ã€‚
</code></pre></div></div>

<h3 id="å®éªŒæ­¥éª¤-1">å®éªŒæ­¥éª¤</h3>
<ol>
  <li>
    <p>æ‰“å¼€Vivadoå¹¶åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹å¹¶å‘½åä¸ºlab10_2ã€‚</p>
  </li>
  <li>
    <p>åˆ›å»ºå¹¶æ·»åŠ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚</p>
  </li>
  <li>
    <p>ç¼–å†™ä»¿çœŸæ–‡ä»¶æ¥éªŒè¯ä»£ç çš„æ­£ç¡®</p>
  </li>
  <li>
    <p>åœ¨å·¥ç¨‹ä¸­æ·»åŠ é€‚å½“çš„ç®¡è„šçº¦æŸçš„XDCæ–‡ä»¶ï¼Œå¹¶åŠ å…¥ç›¸å…³è”çš„ç®¡è„šï¼Œä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW0ä½œä¸ºè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED7ï¼šLED4ä¸Šçš„1sè®¡æ•°å’Œä½œä¸ºyoutè¾“å‡ºçš„LED0ã€‚</p>
  </li>
  <li>
    <p>ç»¼åˆï¼Œå®ç°è®¾è®¡ã€‚</p>
  </li>
  <li>
    <p>ç”Ÿæˆæ¯”ç‰¹æµæ–‡ä»¶ï¼Œä¸‹è½½åˆ°Nexys4å¼€å‘æ¿ä¸Šï¼ŒéªŒè¯åŠŸèƒ½ã€‚</p>
    <h3 id="å‚è€ƒä»£ç å’Œåˆ†æ-1">å‚è€ƒä»£ç å’Œåˆ†æ</h3>
    <p>module lab10_2(
     input clk,
     input rst,
     input ain,
     output reg [3:0]count,
     output reg yout
     ); <br />
     parameter s0=0, s1=1,s2=2;
     reg [1:0]state,nextstate;
     always@(posedge clk or posedge rst)
     begin
         if(rst)
         begin
             state&lt;=s0;
             count&lt;=4â€™b0;
         end
         else
         begin
             state&lt;=nextstate;
             if(ain)
             count&lt;=count+1;
         end
     end
     always@(<em>)
     begin
         case(state)
         s0:yout=1;
         default:yout=0;
         endcase
     end
     always@(</em>)
     begin
         case(state)
         s0:if(ain)
         nextstate=s1;
         else
         nextstate=s0;
         s1:if(ain)
         nextstate=s2;
         else
         nextstate=s1;
         s2:if(ain)
         nextstate=s0;
         else
         nextstate=s2;
         endcase
     end
 endmodule</p>
  </li>
</ol>

<p>æ‘©å°”å‹ç›¸è¾ƒç±³åˆ©å‹è¾“å‡ºçš„çŠ¶æ€åªä¸è¾“å…¥ç›¸å…³</p>
<h2 id="æ‰©å±•å®éªŒå†…å®¹">æ‰©å±•å®éªŒå†…å®¹</h2>
<h3 id="æ‰©å±•å®éªŒ1">æ‰©å±•å®éªŒ1</h3>
<p>ä½¿ç”¨ä¸‰æ®µå¼MooreçŠ¶æ€æœºæˆ–è€…MealyçŠ¶æ€æœºå®ç°ä¸€ä¸ªåºåˆ—æ£€æµ‹å™¨ã€‚ <br />
MooreçŠ¶æ€æœºæœ‰ä¸¤ä¸ªè¾“å…¥ï¼ˆain [1ï¼š0]ï¼‰å’Œä¸€ä¸ªè¾“å‡ºï¼ˆyoutï¼‰ã€‚ é™¤éå‡ºç°ä»¥ä¸‹è¾“å…¥åºåˆ—ä¹‹ä¸€ï¼Œå¦åˆ™è¾“å‡ºå°†ä»0å¼€å§‹å¹¶ä¿æŒä¸ºå¸¸é‡å€¼ï¼š</p>
<ol>
  <li>è¾“å…¥åºåˆ—ain [1ï¼š0] = 01,00ä½¿è¾“å‡ºå˜ä¸º0</li>
  <li>è¾“å…¥åºåˆ—ain [1ï¼š0] = 11,00ä½¿è¾“å‡ºå˜ä¸º1</li>
  <li>è¾“å…¥åºåˆ—ain [1ï¼š0] = 10,00ä½¿è¾“å‡ºåˆ‡æ¢ã€‚
    <h4 id="å®éªŒè¦æ±‚-1">å®éªŒè¦æ±‚</h4>
    <p>æ‰“å¼€Vivadoå¹¶åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹å¹¶å‘½åä¸ºlab10_kuozhan1ã€‚è®¾è®¡ä¸€ä¸ªtestbenchï¼ˆç±»ä¼¼äºä¸‹é¢æ˜¾ç¤ºçš„æ³¢å½¢ï¼‰å¹¶é€šè¿‡behavioral simulationéªŒè¯æ¨¡å‹ã€‚ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒSW1-SW0ä½œä¸ºain [1ï¼š0]è¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED0ä½œä¸ºyoutè¾“å‡ºã€‚ å®Œæˆè®¾è®¡æµç¨‹ï¼Œç”Ÿæˆæ¯”ç‰¹æµï¼Œå¹¶å°†å…¶ä¸‹è½½åˆ°Basys3æˆ–Nexys4 DDRæ¿ã€‚ éªŒè¯åŠŸèƒ½ã€‚<br />
ä»¿çœŸç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
  </li>
</ol>
<figure><img class="docimage" src="images/finite_state_machine/8.png" alt="" /></figure>

<h3 id="æ‰©å±•å®éªŒ2">æ‰©å±•å®éªŒ2</h3>
<p>ä½¿ç”¨ROMè®¾è®¡ä¸€ä¸ªç‰¹å®šçš„è®¡æ•°è®¡æ•°å™¨ï¼ˆä¸‹é¢åˆ—å‡ºçš„è®¡æ•°åºåˆ—ï¼‰æ¥å¼€å‘ä¸€ä¸ªMealyçŠ¶æ€æœºã€‚</p>
<h4 id="å®éªŒè¦æ±‚-2">å®éªŒè¦æ±‚</h4>
<p>æ‰“å¼€Vivadoå¹¶åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹å¹¶å‘½åä¸ºlab10_kuozhan2ã€‚è®¾è®¡ä¸€ä¸ªtestbenchå¹¶é€šè¿‡behavioral simulationéªŒè¯æ¨¡å‹ã€‚ ä½¿ç”¨SW15ä½œä¸ºæ—¶é’Ÿè¾“å…¥ï¼ŒBTNUæŒ‰é’®ä½œä¸ºç”µè·¯çš„å¤ä½è¾“å…¥ï¼ŒLED2ï¼šLED0ä½œä¸ºè®¡æ•°å™¨çš„è®¡æ•°è¾“å‡ºã€‚ å®Œæˆè®¾è®¡æµç¨‹ï¼Œç”Ÿæˆæ¯”ç‰¹æµï¼Œå¹¶å°†å…¶ä¸‹è½½åˆ°Basys3æˆ–Nexys4 DDRæ¿ã€‚ éªŒè¯åŠŸèƒ½ã€‚<br />
è®¡æ•°åºåˆ—æ˜¯: 000, 001, 011, 101, 111, 010 (repeat) 000, â€¦</p>

<figure><img class="docimage" src="images/finite_state_machine/9.png" alt="" /></figure>

<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œæ‚¨å­¦ä¹ äº†Mealyå’ŒMooreçŠ¶æ€æœºå»ºæ¨¡æ–¹æ³•ã€‚è¿˜è®¾è®¡å¹¶å®ç°äº†åºåˆ—æ£€æµ‹å™¨ã€åºåˆ—ç”Ÿæˆå™¨å’Œç¼–ç è½¬æ¢å™¨ï¼Œå®è·µäº†ä¸¤æ®µå’Œä¸‰æ®µå¼çš„çŠ¶æ€æœºã€‚</p>

:ET